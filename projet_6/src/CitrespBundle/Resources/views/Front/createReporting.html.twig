{# src/CitrespBundle/Resources/views/Front/createReporting.html.twig #}

{% extends '@Citresp/layout.html.twig' %}

{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" href="{{ asset('theme/css/sign-in.css') }}">
  <style>
    #map {
      min-height: 26.25rem;
    }
  </style>
{% endblock %}

{% block header %}
  {% embed "@Citresp/cityMapHeader.html.twig" %}{% endembed %}
{% endblock %}

{% block body %}
  <div class="container text-center">

    <div class="contaner-sign-in text-center">
      {% embed "@Citresp/FormViews/createReportingForm.html.twig" %}{% endembed %}
    </div>


  </div>

{% endblock %}

{% block javascripts %}
  {{ parent() }}
  <script>
    var map;
    function initMap() {
      var city = {
        lat: {{ city.gpsLat }},
        lng: {{ city.gpsLng }}
      };
      var jsMarkers = new Array();

      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 15,
        center: city
      });

      {% for reporting in reportings %}

        var marker = new google.maps.Marker({
          position: {
            lat: {{ reporting.gpsLat }},
            lng: {{ reporting.gpsLng }}
          },
          map: map
        });
      {% endfor %}
    }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key={{googleApi}}&callback=initMap" async="async" defer="defer"></script>
{% endblock %}
